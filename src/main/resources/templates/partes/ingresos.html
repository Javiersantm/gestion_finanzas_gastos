<div th:fragment="ingresosContent" class="container py-4">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h2 fw-bold text-dark">Dashboard Financiero</h1>
        <span class="badge bg-secondary p-2 shadow-sm">
            <i class="far fa-calendar-alt me-1"></i> <span id="currentDateDisplay">Fecha</span>
        </span>
    </div>

    <div class="row g-4 mb-4">
        <div class="col-md-4">
            <div class="card border-0 shadow-sm bg-success text-white h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <h6 class="card-title fw-semibold mb-1 opacity-75">Ingresos (Mes)</h6>
                            <h2 class="card-text fw-bold mb-0" id="totalIngresosDisplay">€0.00</h2>
                        </div>
                        <div class="bg-white bg-opacity-25 rounded-circle p-2">
                            <i class="fas fa-arrow-up fa-lg"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card border-0 shadow-sm bg-danger text-white h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <h6 class="card-title fw-semibold mb-1 opacity-75">Gastos (Mes)</h6>
                            <h2 class="card-text fw-bold mb-0" id="gastosMesDisplay">€0.00</h2>
                        </div>
                        <div class="bg-white bg-opacity-25 rounded-circle p-2">
                            <i class="fas fa-arrow-down fa-lg"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card border-0 shadow-sm bg-primary text-white h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <h6 class="card-title fw-semibold mb-1 opacity-75">Balance Disponible</h6>
                            <h2 class="card-text fw-bold mb-0" id="balanceMesDisplay">€0.00</h2>
                        </div>
                        <div class="bg-white bg-opacity-25 rounded-circle p-2">
                            <i class="fas fa-wallet fa-lg"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-6 mx-auto"> <div class="card border-0 shadow-sm">
            <div class="card-header bg-white fw-bold border-bottom-0">
                <i class="fas fa-chart-pie me-1 text-secondary"></i> Distribución de Gastos
            </div>
            <div class="card-body d-flex justify-content-center" style="height: 300px;">
                <canvas id="gastosChart"></canvas>
            </div>
        </div>
        </div>
    </div>
    <div class="d-flex flex-wrap gap-3 mb-4">
        <button type="button" class="btn btn-success d-flex align-items-center gap-2 shadow-sm"
                data-bs-toggle="modal" data-bs-target="#modal-nuevo-ingreso">
            <i class="fas fa-plus-circle"></i> Nuevo Ingreso
        </button>

        <button type="button" class="btn btn-danger d-flex align-items-center gap-2 shadow-sm"
                data-bs-toggle="modal" data-bs-target="#modal-nuevo-gasto">
            <i class="fas fa-minus-circle"></i> Nuevo Gasto
        </button>

        <button type="button" class="btn btn-warning d-flex align-items-center gap-2 shadow-sm ms-auto text-dark fw-bold"
                data-bs-toggle="modal" data-bs-target="#modal-enviar-bizum">
            <i class="fas fa-mobile-alt"></i> Enviar Bizum
        </button>
    </div>

    <div class="card border-0 shadow-sm">
        <div class="card-header bg-white border-bottom-0 pt-3">
            <ul class="nav nav-tabs card-header-tabs" id="finanzasTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active text-success fw-bold" id="ingresos-tab" data-bs-toggle="tab" data-bs-target="#ingresos-pane" type="button" role="tab">
                        <i class="fas fa-arrow-up me-1"></i> Ingresos
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link text-danger fw-bold" id="gastos-tab" data-bs-toggle="tab" data-bs-target="#gastos-pane" type="button" role="tab">
                        <i class="fas fa-arrow-down me-1"></i> Gastos
                    </button>
                </li>
            </ul>
        </div>

        <div class="card-body p-0">
            <div class="tab-content" id="finanzasTabContent">
                <div class="tab-pane fade show active" id="ingresos-pane" role="tabpanel">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle mb-0">
                            <thead class="bg-light">
                            <tr>
                                <th class="ps-4">Usuario</th>
                                <th>Fuente</th>
                                <th>Fecha</th>
                                <th class="text-end">Cantidad</th>
                                <th class="text-center">Acciones</th>
                            </tr>
                            </thead>
                            <tbody id="ingresosTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <div class="tab-pane fade" id="gastos-pane" role="tabpanel">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle mb-0">
                            <thead class="bg-light">
                            <tr>
                                <th class="ps-4">Usuario</th>
                                <th>Descripción</th>
                                <th>Fecha</th>
                                <th class="text-end">Importe</th>
                                <th class="text-center">Acciones</th>
                            </tr>
                            </thead>
                            <tbody id="gastosTableBody"></tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>